<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui">
	<ui:composition template="/faces/templates/main-template.xhtml">
		<ui:define name="additionalScripts">
			<ui:include src="/faces/misc/google-maps-script.xhtml"></ui:include>
		</ui:define>
	
		<ui:define name="content">			
			<h:form id="mainForm">
				<ui:include src="/faces/layout/mapAreaFilter.xhtml" />
			
				<p:gmap id="gmap" center="-26.1715046,27.9699835" zoom="8" type="terrain" style="width:100%;height:500px" model="#{mapAreaBean.mapModel}">
	        		<p:ajax event="overlaySelect" listener="#{mapAreaBean.onPolygonSelect}" />
	    		</p:gmap>
	    		
	    		<p:dialog id="mapAreaDialog" header="Map Area" widgetVar="mapAreaDialog" minHeight="40">
	    		 	<p:ajax event="close" update="mainForm:mapAreaDialog" listener="#{mapAreaBean.clearSelectedPolygon()}" />
    				<ui:include src="/faces/layout/mapArea.xhtml" />
				</p:dialog>
    		</h:form>
		</ui:define>
	</ui:composition>
</html>